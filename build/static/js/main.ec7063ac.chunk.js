(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){e.exports=a(54)},30:function(e,t,a){},50:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(23),c=a.n(l),o=(a(30),a(4)),i=a(5),s=a(7),m=a(6),u=a(8),d=a(11),p=a(56),h=function(e){var t=e.title,a=e.id,n=e.posterPath,l=e.cardType;return r.a.createElement("div",{className:"card col-md-4"},r.a.createElement("img",{className:"card-img-top",src:"https://image.tmdb.org/t/p/w500".concat(n),alt:"Poster"}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},t),r.a.createElement(p.a,{className:"btn btn-primary",to:"/".concat(l,"/").concat(a)},"Details")))},f=a(15),v=a.n(f),g=function(e){var t=[];for(var a in e)e[a]&&t.push(a);return t.join(",")},E=function(e){var t=e.currentPage,a=e.onClick,n=e.totalPages,l=function(e,t){return e<=5&&t<=5?v.a.range(1,t+1):e<=3&&t>5?v.a.range(1,6):t>5&&e<=t-2?v.a.range(e-2,e+3):t>5&&t-2<=e<=t?v.a.range(t-4,t+1):void 0}(t,n);return r.a.createElement("nav",{className:"d-flex justify-content-center"},r.a.createElement("ul",{className:"pagination"},l.map(function(e){return r.a.createElement("li",{key:e,className:t===e?"page-item active":"page-item",onClick:function(){return a(e)}},r.a.createElement("button",{className:"page-link"},e))})))},b=function(e){var t=e.data,a=e.handleChacked,n=e.statusData;return r.a.createElement(r.a.Fragment,null,t.map(function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("input",{type:"checkbox",id:e.id,name:e.name,value:e.id,onChange:a,checked:n[e.id]||!1}),r.a.createElement("label",{htmlFor:e.id}," ",e.name))}))},y=function(e){var t=e.type,a=e.genres||"",n=e.query||"",r=e.page||"1",l=e.sortBy||"popularity.desc",c=e.adult||!0,o="".concat("https://api.themoviedb.org/3/").concat({movie:"search/movie",discoverMovies:"discover/movie",popularPerson:"person/popular"}[t],"?api_key=").concat("340af08aad86d2a893fef0bc25ea615d","&page=").concat(r,"&sort_by=").concat(l,"&query=").concat(n,"&with_genres=").concat(a,"&include_adult=").concat(c);return fetch(o).then(function(e){return e.json()})},N=[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}],j=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={data:[],currentPage:1,totalPages:13,value:"",filter:{genres:{}},searchType:"discoverMovies",movieQuery:"",genresQuery:""},a.handlePageClick=function(e){var t=a.state,n=t.genresQuery,r=t.movieQuery,l=t.searchType;y({type:l,genres:n,page:e,query:r}).then(function(t){return a.setState({data:t.results,currentPage:e})})},a.handleInput=function(e){a.setState({value:e.target.value})},a.handleChacked=function(e){var t=Object(d.a)({},a.state.filter.genres);t[e.target.id]=!t[e.target.id],a.setState({filter:{genres:t}})},a.handleTitleSearch=function(){var e=a.state.value.toLowerCase();y({type:"movie",query:e}).then(function(t){console.log("fetchingData",t),a.setState({data:t.results,searchType:"movie",totalPages:t.total_pages,movieQuery:e,currentPage:1})})},a.handleGenresSearch=function(){var e=Object(d.a)({},a.state.filter.genres),t=g(e);y({type:"discoverMovies",genres:t}).then(function(e){return a.setState({data:e.results,searchType:"discoverMovies",totalPages:e.total_pages,genresQuery:t,currentPage:1})})},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.currentPage;y({type:"discoverMovies",page:t}).then(function(t){return e.setState({data:t.results,totalPages:t.total_pages})})}},{key:"render",value:function(){var e=this.state.data;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("input",{className:"form-control",type:"text",placeholder:"Search Movie",value:this.state.value,onChange:this.handleInput}),r.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:this.handleTitleSearch},"Search by title"),r.a.createElement(b,{data:N,handleChacked:this.handleChacked,statusData:this.state.filter.genres}),r.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:this.handleGenresSearch},"Search by genres")),r.a.createElement("div",{className:"col-md-9"},r.a.createElement("div",{className:"d-flex flex-wrap"},e.map(function(e){return r.a.createElement(h,{key:e.id,id:e.id,title:e.title,posterPath:e.poster_path,cardType:"movie"})})),r.a.createElement(E,{totalPages:this.state.totalPages,currentPage:this.state.currentPage,onClick:this.handlePageClick}))))}}]),t}(n.Component),w=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={data:[],searchType:"popularPerson",currentPage:1},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t={page:"1",type:this.state.searchType};y(t).then(function(t){return e.setState({data:t.results,totalPages:t.total_pages})})}},{key:"render",value:function(){var e=this.state.data;return r.a.createElement("div",{className:"d-flex flex-wrap"},e.map(function(e){return r.a.createElement(h,{key:e.id,id:e.id,title:e.name,posterPath:e.profile_path,cardType:"people"})}))}}]),t}(n.Component),O=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={data:{},movieId:a.props.match.params.id,videos:{results:[]}},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://api.themoviedb.org/3/movie/".concat(this.state.movieId,"?api_key=340af08aad86d2a893fef0bc25ea615d&language=en-US")).then(function(e){return e.json()}).then(function(t){return e.setState({data:t})}),fetch("https://api.themoviedb.org/3/movie/".concat(this.state.movieId,"/videos?api_key=340af08aad86d2a893fef0bc25ea615d&language=en-US")).then(function(e){return e.json()}).then(function(t){return e.setState({videos:t})})}},{key:"render",value:function(){var e=this.state,t=e.data;e.videos;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("img",{className:"card-img-top",src:"https://image.tmdb.org/t/p/w500".concat(t.poster_path),alt:"Poster"}),r.a.createElement("h2",null,t.title),r.a.createElement("p",null,t.overview)),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("img",{src:"https://image.tmdb.org/t/p/original".concat(t.backdrop_path),className:"img-fluid",alt:"Responsive"}),r.a.createElement("table",{className:"table table-bordered"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Avg. vote"),r.a.createElement("td",null,t.vote_average)),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Genres"),r.a.createElement("td",null,t.genres?t.genres.map(function(e){return e.name}).join(", "):null)),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Release date"),r.a.createElement("td",null,t.release_date?t.release_date.split("-").join("."):null)),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Production countries"),r.a.createElement("td",null,t.production_countries?t.production_countries.map(function(e){return e.name}).join(", "):null)),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Original language"),r.a.createElement("td",null,t.original_language?t.original_language.toUpperCase():null)),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Runtime"),r.a.createElement("td",null,t.runtime," minutes"))))))))}}]),t}(n.Component),k=a(19),P=a.n(k);P.a.initializeApp({apiKey:"AIzaSyBWk3fur0gj0umQq-5vXT10qRvgvOW7izM",authDomain:"react-movie-app-cc9d9.firebaseapp.com",databaseURL:"https://react-movie-app-cc9d9.firebaseio.com",projectId:"react-movie-app-cc9d9",storageBucket:"react-movie-app-cc9d9.appspot.com",messagingSenderId:"70150364865"});var C=P.a,S=(P.a.database(),function(e,t,a){e&&t&&a&&C.auth().createUserWithEmailAndPassword(e,t).then(function(){var e=C.auth().currentUser;e.updateProfile({displayName:a}).then(function(){_(e)})}).catch(function(e){var t=e.code,a=e.message;console.log(t,a)})}),x=function(e,t){e&&t&&C.auth().signInWithEmailAndPassword(e,t).catch(function(e){var t=e.code,a=e.message;console.log(t,a)})},A=function(){C.auth().signOut().then(function(){console.log("Sign-out successful.")})},_=function(e){C.database().ref("users/"+e.uid).set({name:e.displayName})},I=function(e){var t=e.isAuth,a=e.profileName;return r.a.createElement("nav",{className:"nav nav-pills d-flex justify-content-between"},r.a.createElement("ul",{className:"d-flex justify-content-start"},r.a.createElement("li",{className:"nav-item flex-sm-fill text-sm-center"},r.a.createElement(p.a,{className:"nav-link",to:"/"},"Movie Data Base")),r.a.createElement("li",{className:"nav-item flex-sm-fill text-sm-center"},r.a.createElement(p.a,{className:"nav-link",to:"/people-data-base"},"People"))),r.a.createElement("ul",{className:"d-flex justify-content-end"},r.a.createElement("li",{className:"nav-item flex-sm-fill text-sm-center"},r.a.createElement(p.a,{className:"nav-link",to:"/profile"},"Profile ".concat(a))),!t&&r.a.createElement("li",{className:"nav-item flex-sm-fill text-sm-center"},r.a.createElement(p.a,{className:"nav-link",to:"/login"},"Login")),t&&r.a.createElement("li",{className:"nav-item flex-sm-fill text-sm-center"},r.a.createElement("button",{className:"btn btn-outline-success",type:"button",onClick:function(){return A()}},"Logout"))))},D=function(){return r.a.createElement("h1",null,"404 Not Found")},T=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleLogout=function(){a.props.clearLoginData(),A()},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Profile"),r.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:this.handleLogout},"Logout"))}}]),t}(n.Component),M=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},a.handleLogin=function(){x(a.state.email,a.state.password),a.props.history.push("/")},a.handleInput=function(e){var t=Object(d.a)({},a.state);t[e.currentTarget.type]=e.currentTarget.value,a.setState(Object(d.a)({},t))},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-lg-"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Email address"),r.a.createElement("input",{type:"email",className:"form-control",placeholder:"Enter email",value:t,onChange:this.handleInput}),r.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"We'll never share your email with anyone else.")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleInputPassword1"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",placeholder:"Password",value:a,onChange:this.handleInput})),r.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:this.handleLogin},"Login"),r.a.createElement(p.a,{className:"btn btn-primary",to:"/sign-in"},"Sign In")))))}}]),t}(n.Component),F=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",email:"",password:""},a.handleSignin=function(e){e.preventDefault(),S(a.state.email,a.state.password,a.state.name),a.props.history.push("/")},a.handleInput=function(e){var t=Object(d.a)({},a.state);t[e.currentTarget.id]=e.currentTarget.value,a.setState(Object(d.a)({},t))},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.name;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-lg-"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Your full name"),r.a.createElement("input",{id:"name",type:"text",className:"form-control",placeholder:"Your full name",value:n,onChange:this.handleInput})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email address"),r.a.createElement("input",{id:"email",type:"email",className:"form-control",placeholder:"Enter email",value:t,onChange:this.handleInput}),r.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"We'll never share your email with anyone else.")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{id:"password",type:"password",className:"form-control",placeholder:"Password",value:a,onChange:this.handleInput})),r.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:this.handleSignin},"Sign In")))))}}]),t}(n.Component),L=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={data:{},peopleId:a.props.match.params.id},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://api.themoviedb.org/3/person/".concat(this.state.peopleId,"?api_key=340af08aad86d2a893fef0bc25ea615d&language=en-US")).then(function(e){return e.json()}).then(function(t){return e.setState({data:t})})}},{key:"render",value:function(){var e=this.state.data;return console.log(e),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("img",{className:"card-img-top",src:"https://image.tmdb.org/t/p/w500".concat(e.profile_path),alt:"Poster"})),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("h1",null,e.name),r.a.createElement("table",{className:"table table-bordered"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Place of birth"),r.a.createElement("td",null,e.place_of_birth)),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Popularity"),r.a.createElement("td",null,e.popularity)),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Birthday"),r.a.createElement("td",null,e.birthday?e.birthday.split("-").join("."):null)),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Homepage"),r.a.createElement("td",null,e.homepage)))),r.a.createElement("p",null,e.biography)))))}}]),t}(n.Component),W=a(24),U=a(60),B=a(57),Q=function(e){var t=e.component,a=e.isAuth,n=Object(W.a)(e,["component","isAuth"]);return r.a.createElement(U.a,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(B.a,{to:"/login"})}}))},q=a(59),R=(a(50),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={user:{isAuth:!1,uid:"",userName:""}},a.setLoginData=function(e){a.setState({user:e})},a.clearLoginData=function(){a.setState({user:{isAuth:!1,uid:""}})},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;C.auth().onAuthStateChanged(function(t){t?(console.log("user",t),e.setState({user:{isAuth:!0,uid:t.uid,email:t.email,userName:t.displayName}})):(console.log("no user"),e.setState({user:{isAuth:!1,uid:"",userName:""}}))})}},{key:"render",value:function(){var e=this,t=this.state.user;return r.a.createElement(r.a.Fragment,null,r.a.createElement(I,{isAuth:t.isAuth,profileEmail:t.email,profileName:t.userName}),r.a.createElement(q.a,null,r.a.createElement(U.a,{path:"/movie/:id",component:O}),r.a.createElement(U.a,{path:"/people/:id",component:L}),r.a.createElement(U.a,{path:"/people-data-base",component:w}),r.a.createElement(U.a,{path:"/not-found",component:D}),r.a.createElement(U.a,{path:"/sign-in",component:F}),r.a.createElement(Q,{path:"/profile",isAuth:t.isAuth,component:T}),r.a.createElement(U.a,{path:"/login",render:function(t){return r.a.createElement(M,Object.assign({getUserData:e.setLoginData},t))}}),r.a.createElement(U.a,{path:"/",exact:!0,component:j}),r.a.createElement(B.a,{to:"/not-found"})))}}]),t}(n.Component)),H=a(58);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(52);c.a.render(r.a.createElement(H.a,null,r.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[25,2,1]]]);
//# sourceMappingURL=main.ec7063ac.chunk.js.map